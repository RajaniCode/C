@using Gigya.UI.Security

@{
    // var logOutUrl = @Uri.EscapeDataString(Url.Action("Logout", "Account", new { Area = "" }, Context.Request.Scheme)";

    // var logOutUrl = $"{@Url.Action("LoggedOut", "LoginStatus", new { Area = "Account", gigyaId = ViewData["GigyaId"] })}";

    var logOutUrl = $"{@Url.Action("LoggedOut", "LoginStatus", new { Area = "Account" })}";

    var name = string.Empty;
    var identityName = string.Empty;

    if (@User != null)
    {
        if (@User.GetUserName() != null)
        {
            name = @User.GetUserName();
        }
        if (@User.Identity.Name != null)
        {
            identityName = @User.Identity.Name;
        }
    }

    //var v1 = @User.GetUserId();

    //var v2 = @User.GetUserGigyaId();

    //var v3 = @User.GetUserName();

    //var v4 = @User.GetLastLogin();

    //var v5 = @User.GetUserRole();

    //var v6 = @User.GetUserRoleId();
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - _LoggedInLayout</title>

    <!-- STYLESHEET -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" />

    <!-- TYPEKIT (Unique per domain, update when deploying) -->
    <script src="https://use.typekit.net/owy6fxs.js"></script>
    <script>try { Typekit.load({ async: true }); } catch (e) { }</script>

</head>
<body>
    <header>
        @*<nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">*@
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light">
            <div class="container">
                @*<a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">Gigya.UI</a>*@
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <span class="navbar-text"
                                  style="color: #585858; font-size: 14px; font-weight: bold; display: inline-block; border-right: 1px solid #585858; padding: 0 10px;">@name</span>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                   style="color: #157FBF; font-size: 14px; font-weight: bold; display: inline-block; border-right: 1px solid #585858; padding: 0 10px;" href="@Url.Action("Index", new {Area = "Profile", Controller = "Profile"})">Account Settings</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                   style="color: #157FBF; font-size: 14px; font-weight: bold; display: inline-block; padding: 0 10px;" href="@logOutUrl">Logout</a>
                            </li>
                        </ul>
                        @*<ul class="navbar-nav flex-grow-1">
                                <li class="nav-item">
                                    <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                                </li>
                            </ul>*@
                    </div>
                </div>
            </nav>
        </header>
        <div class="container">
            <main role="main" class="pb-3">
                @RenderBody()
            </main>
        </div>

        @*<footer class="border-top footer text-muted">
                <div class="container">
                    &copy; 2020 - Gigya.UI - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                </div>
            </footer>*@
        <script src="~/lib/jquery/dist/jquery.min.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="~/js/site.js" asp-append-version="true"></script>
        @RenderSection("Scripts", required: false)

        <!--<script>

        $(document).ready(function () {
            //var aliasProducer = 0;
            var aliasAs = "";
            var aliasAdmin = readCookie("aliasAdmin");

            backtoAdmin.click(function () {
                aliasId = aliasAdmin;
                actionLogin();
            });
        });


        // Login action redirection call-->
        @*function actionLogin() {
            var adminId = @this.User.GetUserId();
            if (aliasId > 0) {
                $.ajax({
                    url: "/Home/AliasRedirect",
                    method: 'GET',
                    data: { id: aliasId },
                    success: function (response) {
                        var aliasAdmin = readCookie("aliasAdmin");
                        if (aliasAdmin != undefined && aliasAdmin != 0)
                            createCookie('aliasAdmin', adminId, -1);
                        else
                            createCookie('aliasAdmin', adminId, 0);

                        location.href = "/Home/Index";
                    }
                });
            }
            else {
                return;
            }
        }*@
        <!--</script>-->
    </body>
</html>
